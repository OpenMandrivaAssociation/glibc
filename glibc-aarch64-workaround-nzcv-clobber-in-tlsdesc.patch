--- glibc-2.25.51/sysdeps/aarch64/dl-tlsdesc.S.0037~	2017-07-11 16:44:14.000000000 +0200
+++ glibc-2.25.51/sysdeps/aarch64/dl-tlsdesc.S	2017-07-11 18:41:05.422425655 +0200
@@ -173,7 +173,7 @@ _dl_tlsdesc_undefweak:
 	cfi_startproc
 	.align 2
 _dl_tlsdesc_dynamic:
-# define NSAVEXREGPAIRS 2
+# define NSAVEXREGPAIRS 3
 	stp	x29, x30, [sp,#-(32+16*NSAVEXREGPAIRS)]!
 	cfi_adjust_cfa_offset (32+16*NSAVEXREGPAIRS)
 	cfi_rel_offset (x29, 0)
@@ -191,6 +191,10 @@ _dl_tlsdesc_dynamic:
 	cfi_rel_offset (x3, 32+16)
 	cfi_rel_offset (x4, 32+24)
 
+	/* Work around GCC rescheduling compares across tlsdesc calls. */
+	mrs	x30, nzcv
+	stp	xzr, x30, [sp, #32+16*2]
+
 	mrs	x4, tpidr_el0
 	/* The ldar here happens after the load from [x0] at the call site
 	   (that is generated by the compiler as part of the TLS access ABI),
@@ -216,6 +220,8 @@ _dl_tlsdesc_dynamic:
 1:
 	ldp	 x1,  x2, [sp, #32+16*0]
 	ldp	 x3,  x4, [sp, #32+16*1]
+	ldp	 xzr, x30, [sp, #32+16*2]
+	msr	 nzcv, x30
 
 	ldp	x29, x30, [sp], #(32+16*NSAVEXREGPAIRS)
 	cfi_adjust_cfa_offset (-32-16*NSAVEXREGPAIRS)
